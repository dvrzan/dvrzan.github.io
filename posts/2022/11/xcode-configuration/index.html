<!DOCTYPE html><html><head><meta charset="UTF-8"/><meta property="og:site_name" content="Danijela's blog"/><link rel="canonical" href="https://www.danijelavrzan.com/posts/2022/11/xcode-configuration"/><meta name="twitter:url" content="https://www.danijelavrzan.com/posts/2022/11/xcode-configuration"/><meta property="og:url" content="https://www.danijelavrzan.com/posts/2022/11/xcode-configuration"/><title>How to manage build settings using Xcode configuration files | Danijela's blog</title><meta name="twitter:title" content="How to manage build settings using Xcode configuration files | Danijela's blog"/><meta property="og:title" content="How to manage build settings using Xcode configuration files | Danijela's blog"/><meta name="description" content="You use Xcode build configuration files to define all sorts of useful build settings. You can open them with different text editors outside of Xcode and all properties are in plain text. It's common to use them for managing constants across different environments."/><meta name="twitter:description" content="You use Xcode build configuration files to define all sorts of useful build settings. You can open them with different text editors outside of Xcode and all properties are in plain text. It's common to use them for managing constants across different environments."/><meta property="og:description" content="You use Xcode build configuration files to define all sorts of useful build settings. You can open them with different text editors outside of Xcode and all properties are in plain text. It's common to use them for managing constants across different environments."/><meta name="twitter:card" content="summary_large_image"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Danijela's blog"/><meta name="twitter:image" content="https://www.danijelavrzan.com/images/posts/2022/11/xcode-configuration.png"/><meta property="og:image" content="https://www.danijelavrzan.com/images/posts/2022/11/xcode-configuration.png"/></head><head><script src="https://www.googletagmanager.com/gtag/js?id=G-B5B41JSFC7"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B5B41JSFC7');</script></head><body><header><div class="wrapper"><a href="/"><img src="/images/logo.png" aria-label="Danijela Vrzan text logo header" class="banner-img"/></a><p class="banner-title">iOS DEVELOPER</p><p class="banner-subtitle">WRITER. SPEAKER.</p><nav><ul><li><a href="/posts" class="selected">Posts</a></li><li><a href="/speaking">Speaking</a></li><li><a href="/about">About</a></li></ul></nav></div></header><div class="wrapper item-page"><div class="article-metadata"><ul class="tag-list"><li><a href="/tags/swift" class="swift-tag">swift</a></li><li><a href="/tags/xcode" class="xcode-tag">xcode</a></li></ul><p class="item-metadata">29 Nov, 2022 â€¢ 4 minute read</p></div><article><div class="content"><h1>How to manage build settings using Xcode configuration files</h1><p>If you are working as part of a team in a bigger company, it's likely you have multiple environments set up. The names can be different, but these are usually a <strong>development</strong> environment for devs to do their work, a <strong>testing</strong> environment for QAs and a <strong>production</strong> environment.</p><p>If you are working alone, you might not have these environments set up for a smaller app. But even if you don't, you could still benefit from creating an Xcode build configuration file for different build settings.</p><p>You can open Xcode configuration files outside of Xcode and with any text editor. Because all properties are in plain text, they are easier to read and you don't have to navigate Xcode's maze of build settings.</p><p>One of the popular use-cases for using a configuration file is to manage constants across different environments. We're going to use it to store a base URL for our API.</p><blockquote><p>I suggest reading this article by <a href="https://twitter.com/mattt">Matt</a> from NSHipster on <a href="https://nshipster.com/secrets/">Secret Management on iOS</a>. He suggests never to use Xcode Configuration files to manage your API Keys (or secrets). The best way to keep your secrets secure, is to <strong>obfuscate</strong> them using code generation.</p></blockquote><p>Or, in the words of Julian Assange:</p><blockquote><p><em>"The only way to keep a secret is to never have one."</em></p></blockquote><h2>Configuration Settings File</h2><p>Xcode build configuration files or <strong>.xcconfig</strong> files allow us to define and manage build settings for our apps in plain text. Each file consists of a sequence of key-value properties in a <strong>KEY_NAME = value</strong> format, where value can be <code>String</code>, <code>Int</code>, <code>Bool</code>, or other defined formats. You can read more on configuration settings file format in Apple's <a href="https://help.apple.com/xcode/mac/11.4/#/dev745c5c974">Xcode Help</a> documentation.</p><p>In your Xcode project, create a new <strong>Configuration Settings File</strong> anywhere you'd like and name it <strong>Configuration</strong>. Make sure not to select any targets for it.</p><img src="/images/posts/2022/11/xcode-configuration1.png "Configuration Settings File in Xcode"" alt="Configuration Settings File in Xcode"/><p>Next, add a property for your base url to the file:</p><pre><code><span class="comment">// Example:</span>
<span class="type">BASE_URL</span> = awesome.<span class="property">example</span>.<span class="property">com</span>
</code></pre><h2>Info.plist</h2><p>Build settings defined by Xcode project and configuration files are only available at build time. When you compile the app, none of it is available. As it should be.</p><p>After creating the <strong>BASE_URL</strong> property, you need to add it to your <strong>Info.plist</strong> file. It'll get compiled during build time based on the build settings provided and copied into the app bundle.</p><p>But wait, there's no <strong>Info.plist</strong> file in Xcode. Following Xcode 13 release, there's no <strong>Info.plist</strong> file by default anymore when you create a new project in Xcode. This file is a feature and only created when needed. We're nudged to use Xcode's Build Settings instead.</p><p>Select your project in Xcode and go to <strong>Info</strong> tab. Expand <strong>Configurations</strong> and add your <strong>Configuration.xcconfig</strong> file to both <strong>Debug</strong> and <strong>Release</strong>. We only have a single configuration file, but this is where you can set up different configuration files for different environments:</p><img src="/images/posts/2022/11/xcode-configuration2.png "Adding Configuration file in Info settings"" alt="Adding Configuration file in Info settings"/><p>Now all that's left to do is to add a reference to the property in target's build settings.</p><h2>Custom iOS Target Properties</h2><p>By adding a reference to the configuration properties, you can access their values with Foundation's <code>Bundle</code> API.</p><p>Select your project's target in Xcode and go to <strong>Info</strong> tab. Select any property in <strong>Custom iOS Target Properties</strong> and click on the <strong>+</strong> button to add a new property.</p><p>Add <strong>BASE_URL</strong> with the reference to your configuration property <strong>$(BASE_URL)</strong>:</p><img src="/images/posts/2022/11/xcode-configuration3.png "Custom iOS Terget Properties"" alt="Custom iOS Terget Properties"/><p>After adding the property, an <strong>Info.plist</strong> file gets added to your project automatically. All your custom user properties will get stored here.</p><p>Now all you have to do is access the base url in your code.</p><h2>Bundle</h2><p>Create a new <strong>Swift</strong> file and name it any way you'd like. I'll name it <strong>Environment</strong>. Add the following code to the file:</p><pre><code><span class="keyword">import</span> Foundation

<span class="keyword">public struct</span> Environment {
    <span class="keyword">enum</span> Keys {
        <span class="keyword">static let</span> baseURL = <span class="string">"BASE_URL"</span>
    }
    
    <span class="comment">// Get the BASE_URL</span>
    <span class="keyword">static let</span> baseURL: <span class="type">String</span> = {
        <span class="keyword">guard let</span> baseURLProperty = <span class="type">Bundle</span>.<span class="property">main</span>.<span class="call">object</span>(
            forInfoDictionaryKey: <span class="type">Keys</span>.<span class="property">baseURL</span>
        ) <span class="keyword">as</span>? <span class="type">String</span> <span class="keyword">else</span> {
            <span class="call">fatalError</span>(<span class="string">"BASE_URL not found"</span>)
        }
        <span class="keyword">return</span> baseURLProperty
    }()
}
</code></pre><p>Here you create a new <strong>Environment</strong> <code>struct</code> and a <strong>Keys</strong> <code>enum</code> that defines all your custom keys. Then you create a <strong>baseURL</strong> constant to get the value from the bundle. Now you have access to its value where needed.</p><p>Let's print it out in a View to make sure it's working:</p><img src="/images/posts/2022/11/xcode-configuration4.png "Base url printed out in a View"" alt="Base url printed out in a View"/><h2>Final Thoughts</h2><p>Xcode build configuration files are quite useful to manage configuration properties between different environments. You can also use them to easily assing a different app name and an app icon for specific environment.</p><p>What makes them especially useful is you can open them outside of Xcode with any text editor. It also keeps your configuration properties outside of your code.</p><hr><p>Please feel free to reach out on <a href="https://twitter.com/dvrzan">Twitter</a> if you have any questions, comments, or feedback.</p><p>Thank you for reading and happy coding!</p></div></article></div><footer><p>Copyright Â© 2023 Danijela Vrzan. All Rights Reserved.</p><p>Built in Swift using <a href="https://github.com/johnsundell/publish" target="_blank">Publish.</a> <a href="/feed.rss" target="_blank">RSS.</a></p></footer></body></html>