<!DOCTYPE html><html><head><meta charset="UTF-8"/><meta name="og:site_name" content="Danijela's blog"/><link rel="canonical" href="https://www.danijelavrzan.com/posts/2022/09/publish-get-started-custom-theme"/><meta name="twitter:url" content="https://www.danijelavrzan.com/posts/2022/09/publish-get-started-custom-theme"/><meta name="og:url" content="https://www.danijelavrzan.com/posts/2022/09/publish-get-started-custom-theme"/><title>Publish: Getting Started with Custom Themes | Danijela's blog</title><meta name="twitter:title" content="Publish: Getting Started with Custom Themes | Danijela's blog"/><meta name="og:title" content="Publish: Getting Started with Custom Themes | Danijela's blog"/><meta name="description" content="Publish has a default HTML theme called Foundation. But it serves as a guideline and a point of reference to creating your own theme. So your next step, before deploying your website, is to change the default theme and create your own."/><meta name="twitter:description" content="Publish has a default HTML theme called Foundation. But it serves as a guideline and a point of reference to creating your own theme. So your next step, before deploying your website, is to change the default theme and create your own."/><meta name="og:description" content="Publish has a default HTML theme called Foundation. But it serves as a guideline and a point of reference to creating your own theme. So your next step, before deploying your website, is to change the default theme and create your own."/><meta name="twitter:card" content="summary_large_image"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Danijela's blog"/><meta name="twitter:image" content="https://www.danijelavrzan.com/images/posts/2022/09/publish-get-started-custom-theme.png"/><meta name="og:image" content="https://www.danijelavrzan.com/images/posts/2022/09/publish-get-started-custom-theme.png"/></head><head><script src="https://www.googletagmanager.com/gtag/js?id=G-B5B41JSFC7"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B5B41JSFC7');</script></head><body><header><div class="wrapper"><a href="/"><img src="/images/logo.png" aria-label="Danijela Vrzan text logo header" class="banner-img"/></a><p class="banner-title">iOS DEVELOPER</p><p class="banner-subtitle">WRITER. SPEAKER.</p><nav><ul><li><a href="/posts" class="selected">Posts</a></li><li><a href="/speaking">Speaking</a></li><li><a href="/about">About</a></li></ul></nav></div></header><div class="wrapper item-page"><div class="article-metadata"><ul class="tag-list"><li><a href="/tags/publish" class="publish-tag">publish</a></li><li><a href="/tags/web-development" class="webdevelopment-tag">web development</a></li></ul><p class="item-metadata">6 Sep, 2022 • 6 minute read</p></div><article><div class="content"><h1>Publish: Getting Started with Custom Themes</h1><p>So you've learned <a href="https://danijelavrzan.com/posts/2022/06/create-portfolio-website-using-publish/">how to create a personal website in Swift using Publish</a> and you're ready to show it off to the world... almost!</p><blockquote><p>We'll use the website called <strong>MyWebsite</strong>, we created in the previous post, for this and all other posts on Publish.</p></blockquote><p>Before <a href="https://danijelavrzan.com/posts/2022/08/publish-deploy-to-github/">deploying your website</a> you might want to change the theme and create some custom HTML elements.</p><h2>Theme</h2><p>Publish uses a default theme to render your website called <strong>Foundation</strong>. It exists as a guide and a point of reference for creating your own theme.</p><p>Under <strong>Package Dependencies</strong>, find <strong>Publish</strong> and expand it. Go to <strong>Sources</strong> -&gt; <strong>Publish</strong> -&gt; <strong>API</strong> and open <strong>Theme+Foundation</strong> file. At the top you'll find the foundation theme:</p><pre><code><span class="keyword">public extension</span> <span class="type">Theme</span> {
    <span class="comment">/// The default "Foundation" theme that Publish ships with, a very
    /// basic theme mostly implemented for demonstration purposes.</span>
    <span class="keyword">static var</span> foundation: <span class="type">Self</span> {
        <span class="type">Theme</span>(
            htmlFactory: <span class="type">FoundationHTMLFactory</span>(),
            resourcePaths: [<span class="string">"Resources/FoundationTheme/styles.css"</span>]
        )
    }
}
</code></pre><p>Theme consists of two parts. First, you have the <strong>HTMLFactory</strong> where you define the HTML components and create your header, navigation, footer, and other basic HTML elements. Then, you have the <strong>styles.css</strong> file to style your website.</p><blockquote><p>You write your website's components in a SwiftUI-like syntax using Swift language. However, it's good to be familiar with both HTML and CSS. If you've never worked with them before, getting familiar with both and learning some basics will help you design and style your components faster.</p></blockquote><p>To create your own theme, you'll need to add the above extension and define your own HTMLFactory and a CSS file.</p><p>Copy the above code and paste it in your <strong>main.swift</strong> file, above <code>.publish(withTheme:)</code> line:</p><pre><code><span class="comment">// Define your Theme here</span>
...

<span class="comment">// This will generate your website using the built-in Foundation theme:</span>
<span class="keyword">try</span> <span class="type">MyWebsite</span>().<span class="call">publish</span>(withTheme: .<span class="dotAccess">foundation</span>)
</code></pre><p>Xcode will complain it <em>Cannot find FoundationHTMLFactory in the scope</em> and it's not wrong (this time). You need to create it. But before you do that, change the name of your new HTMLFactory inside the theme extension to whatever name you'd like. I'll name it <strong>MyThemeHTMLFactory()</strong>.</p><h2>Styling</h2><p>To create your own custom theme, you need to create a CSS file.</p><p>The theme you defined in <strong>main.swift</strong> is still pointing to foundation theme's <strong>styles.css</strong> file and you need to create your own.</p><p>In your Xcode project, under <strong>Resources</strong>, create a new folder and name it <strong>MyTheme</strong>.</p><p>Now in <strong>Package Dependencies</strong>, find <strong>Publish</strong> and expand it. Go to <strong>Resources</strong> -&gt; <strong>FoundationTheme</strong> and copy the <strong>styles.css</strong> file. You can open Publish in Finder and copy the file from there then paste it in the newly created folder:</p><img src="/images/posts/2022/09/publish-get-started-custom-theme-01.png "styles.css file under Resources folder in Xcode project"" alt="styles.css file under Resources folder in Xcode project"/><p>After you copied the CSS file, make sure to update all the properties you've changed. Open <strong>main.swift</strong> and update the name of your theme, path to your CSS file and the theme name you're publishing your website with:</p><img src="/images/posts/2022/09/publish-get-started-custom-theme-02.png "main.swift file showing highlighted parts of code to change the custom theme name, path to resources folder of the css file and  the call to theme in publish method"" alt="main.swift file showing highlighted parts of code to change the custom theme name, path to resources folder of the css file and the call to theme in publish(withTheme) method"/><h2>HTMLFactory</h2><p>Next, open <strong>Theme+Foundation.swift</strong> file under <strong>Package Dependencies</strong>. Below the <code>extension Theme</code> is a definition of <code>FoundationHTMLFactory</code>. Below the factory are definitions of a few of the HTML components; <code>SiteFooter</code>, <code>SiteHeader</code>, <code>Wrapper</code>, <code>ItemList</code> and <code>ItemTagList</code>.</p><p>First, copy the HTMLFactory and all of the components. Next, create a new file in your Xcode project under <strong>Sources</strong> -&gt; <strong>MyWebsite</strong>. Name it <strong>MyThemeHTMLFactory</strong> or whatever name you chose for your factory. Paste your code to this new file.</p><p>Change the name of the FoundationHTMLFactory to <strong>MyThemeHTMLFactory</strong> or the name of your choice. Then, import both <strong>Publish</strong> and <strong>Plot</strong> below <code>import Foundation</code> at the top of the file:</p><pre><code><span class="keyword">import</span> Foundation
<span class="comment">// Import Publish and Plot</span>
<span class="keyword">import</span> Publish
<span class="keyword">import</span> Plot

<span class="keyword">private struct</span> MyThemeHTMLFactory&lt;Site: <span class="type">Website</span>&gt;: <span class="type">HTMLFactory</span> {
...
}
</code></pre><p>All the errors are now gone and you're ready to customize your theme.</p><p>You can take a closer look what methods define the HTMLFactory by jumping to its definition.</p><blockquote><p>To read the definition of a code component in Xcode, whether from a third party or Apple's API, right-click on the code you want to learn more about and click <strong>Jump to Definition</strong>.</p></blockquote><pre><code><span class="comment">/// Protocol used to implement a website theme's underlying factory,
/// that creates HTML for a site's various locations using the Plot DSL.</span>
<span class="keyword">public protocol</span> HTMLFactory {
    <span class="comment">/// The website that the factory is for. Generic constraints may be
    /// applied to this type to require that a website fulfills certain
    /// requirements in order to use this factory.</span>
    <span class="keyword">associatedtype</span> Site: <span class="type">Website</span>

    <span class="comment">/// Create the HTML to use for the website's main index page.
    /// - **parameter** index: The index page to generate HTML for.
    /// - **parameter** context: The current publishing context.</span>
    <span class="keyword">func</span> makeIndexHTML(for index: <span class="type">Index</span>,
                       context: <span class="type">PublishingContext</span>&lt;<span class="type">Site</span>&gt;) <span class="keyword">throws</span> -&gt; <span class="type">HTML</span>

	...
}
</code></pre><p>There are six methods used to define the HTMLFactory. Each method defines a larger HTML component of your website, for example, the index page (your homepage), sections, pages, items (your blog posts), tag list and tag details.</p><blockquote><p>Use tags to filter your blog posts by a category. Publish creates an new page that has a list of all the tags you define in your blog posts. This list is generated automatically. All tags are defined in the metadata section of a blog post. We'll take a look at this in the future post.</p></blockquote><h2>Standalone Components</h2><p>Standalone components are smaller HTML elements you create outside of the HTMLFactory and call them in any of the makeHTML methods, depending on the use case.</p><p>For example, at the end of the file, there's a <code>SiteFooter()</code> struct that defines your website's footer:</p><pre><code><span class="keyword">private struct</span> SiteFooter: <span class="type">Component</span> {
    <span class="keyword">var</span> body: <span class="type">Component</span> {
        <span class="type">Footer</span> {
            <span class="type">Paragraph</span> {
                <span class="type">Text</span>(<span class="string">"Generated using "</span>)
                <span class="type">Link</span>(<span class="string">"Publish"</span>, url: <span class="string">"https://github.com/johnsundell/publish"</span>)
            }

            <span class="type">Paragraph</span> {
                <span class="type">Link</span>(<span class="string">"RSS feed"</span>, url: <span class="string">"/feed.rss"</span>)
            }
        }
    }
}
</code></pre><p>These <em>smaller</em> components are created using <a href="https://github.com/JohnSundell/Plot">Plot</a> framework and are of type <code>Component</code>. Plot parses the code your write into HTML for your website.</p><p>You'll notice a very SwiftUI-like syntax here. It looks very similar to creating a <strong>SwiftUI</strong> <code>View</code>, there are UI components like <code>Footer</code>, <code>Paragraph</code>, <code>Text</code> and <code>Link</code> inside the <code>body</code>. These are all Plot components you can use to create the UI of your website. You can find more components to use in the Plot API.</p><p>When you create a standalone <code>Component</code> you need to call it in one of the HTMLFactory methods. Or all of them. Since <code>SiteFooter</code> is an HTML component that all the web pages of your website will have, that component is called at the end of every method.</p><blockquote><p>The order of calling the components matters. SiteFooter is added at the end because it's the last element of a web page.</p></blockquote><p>The footer is rendered like this on your website:</p><img src="/images/posts/2022/09/publish-get-started-custom-theme-03.png "Highlighted parts of website: header, body and footer"" alt="Highlighted parts of website: header, body and footer"/><p>And the underlying HTML looks like this:</p><pre><code class="language-no-highlight">&lt;footer&gt;
  &lt;p&gt;Generated using 
    &lt;a href="https://github.com/johnsundell/publish"&gt;Publish&lt;/a&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;a href="/feed.rss"&gt;RSS feed&lt;/a&gt;
  &lt;/p&gt;
&lt;/footer&gt;
</code></pre><p>We won't go into details on every component and every makeHTML method. I've shown you how they work and now you can explore them on your own.</p><h2>Final Thoughts</h2><p>This is where things get more complex when using Publish. You have to explore on your own. You have to read both Publish and Plot APIs code to figure out how to create components and how they fit together.</p><p>There will be more posts on this topic and how to work with the CSS file as well. This is just to get you started creating your own custom theme. I suggest you explore on your own and figure things out as you go along.</p><hr><p>Please feel free to reach out on <a href="https://twitter.com/dvrzan">Twitter</a> if you have any questions, comments, or feedback.</p><p>Thank you for reading and happy coding!</p></div></article></div><footer><p>Copyright © 2022-2023 Danijela Vrzan. All Rights Reserved.</p><p>Built in Swift using <a href="https://github.com/johnsundell/publish" target="_blank">Publish.</a> <a href="/feed.rss" target="_blank">RSS.</a></p></footer></body></html>